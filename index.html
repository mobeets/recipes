---
layout: post
---
<!-- https://help.shopify.com/themes/liquid/filters/array-filters -->
<!-- https://github.com/Shopify/liquid/wiki/Liquid-for-Designers -->

{% assign popularcount = site.data.settings.popular_count %}
{% assign populartag = 'popular' | split: ' ' %}
{% assign thisweektag = 'this-week' | split: ' ' %}
{% assign max_date = site.data.recipes | map:'last_suggested_date' | uniq | sort | last %}
<div class="everything">
    <div class="btn-menu">
        {% assign tags = site.data.recipes | map: 'tags' | uniq | sort | concat: thisweektag | concat: populartag %}
        <div class="menu-tags">
            {% for tag in tags %}
                <div class="btn btn-list-item btn-tag btn-menu-tag" data-tag="{{ tag }}">{{ tag }}</div>
            {% endfor %}
        </div>
    </div>
    <br><br>
    <input type="text" id="search-box" name="fname">
    <br><span id="filter_status"></span>

<!-- 
- name: "scallops, oyster mushrooms"
  type: "" # ignore; will be a tag
  protein: "seafood" # ignore; will be a tag
  comments: "scallops via Julia Child cookbook, mushrooms via mushroom kit!"
  last_suggested_date: "2017-08-27"
  dates_eaten: []
  tags: []
  recipe_urls: []
-->

    <div id="recipes" class="recipes all list-group">
    {% for item in site.data.recipes %}
        <div class="media-item">
            <div class="item-head">
                <span class="item-title">{{ item.name | capitalize }}</span>
                {% if item.recipe_urls and item.recipe_urls != empty %}[{% for url in item.recipe_urls %}<a href="{{ url }}">recipe</a>{% unless forloop.last %}, {% endunless %}{% endfor %}]{% endif %}
            </div>
            <div class="item-opinion">
                {% if item.tags %}
                {% assign curtagnames = item.tags %}
                {% if item.count and item.count > popularcount %}
                    {% assign curtagnames = curtagnames | concat: populartag %}
                {% endif %}
                {% if item.last_suggested_date and item.last_suggested_date == max_date %}
                    {% assign curtagnames = curtagnames | concat: thisweektag %}
                {% endif %}
                {% assign curtags = curtagnames | join:' btn-tag-' | prepend: 'btn-tag-' %}
                <div class="tags {{ curtags }}">
                    <span class="item-label">tags:</span> 
                    {% for tag in item.tags %}
                    <div class="btn btn-list-item btn-tag" data-tag="{{ tag }}">{{ tag }}</div>
                    {% endfor %}
                </div>
                {% else %}
                    <div class="btn-tag" style="display: hidden;" data-tag="(none)"></div>
                {% endif %}
                <!-- {% if item.count %}
                <div class="count">
                    <span class="item-label"># times:</span> {{ item.count }}
                </div>
                {% endif %} -->
                {% if item.comments != empty %}
                <div class="comments">
                    <span class="item-label">comments:</span> {% for comment in item.comments %}{% if forloop.index == 1 %}<br/>{% endif %}<span class="comment-index">[{{ comment.date }}] </span>{{ comment.comment }}</br>{% endfor %}
                </div>
                {% endif %}
            </div>
        </div>
    {% endfor %}
    </div>

</div>
